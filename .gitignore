# Fichiers Ã  ignorer lors du dÃ©ploiement

# Frontend
frontend/node_modules/
frontend/build/
frontend/.env.local

# Backend
backend/**/__pycache__/
backend/**/*.pyc
backend/.aws-sam/

# IDE
.idea/
.vscode/
*.swp
*.swo

# OS
.DS_Store
Thumbs.db

# Environnement Python
.venv/
venv/
*.egg-info/

# Logs
*.log

# Secrets
.env
credentials.json
# Site Web CopropriÃ©tÃ© Delphinium

Site web complet pour la gestion de la copropriÃ©tÃ© Delphinium, avec authentification, gestion des rÃ´les, et multiples sections fonctionnelles.

## ğŸ—ï¸ Architecture

### Frontend
- **Framework**: React 18
- **UI Library**: Material-UI (MUI)
- **Routing**: React Router v6
- **Internationalisation**: react-i18next (FranÃ§ais, NÃ©erlandais, Anglais)
- **Ã‰tat**: React Hooks (useState, useEffect)

### Backend
- **Cloud Provider**: AWS
- **Compute**: Lambda (Serverless)
- **Authentification**: AWS Cognito
- **Base de donnÃ©es**: DynamoDB (mode PAY_PER_REQUEST)
- **Stockage**: S3 (pour les documents)
- **API**: API Gateway REST
- **Notifications**: SNS (optionnel)

## ğŸ‘¥ Gestion des RÃ´les

Le site supporte 4 niveaux d'accÃ¨s via AWS Cognito :

1. **superadmin** - AccÃ¨s complet Ã  toutes les fonctionnalitÃ©s
2. **admin** - Membres du conseil de copropriÃ©tÃ© (accÃ¨s Ã  la gestion d'incidents)
3. **user** - RÃ©sidents de l'immeuble (accÃ¨s aux sections communes)
4. **service** - SociÃ©tÃ©s de services (Syndic, maintenance, etc.)

## ğŸ“‹ Sections du Site

### 1. **Newsgroup (Forum)**
- Discussion ouverte entre tous les rÃ©sidents
- CrÃ©ation de threads et rÃ©ponses
- Affichage chronologique des discussions

### 2. **Blog**
- ActualitÃ©s et annonces importantes
- Publication rÃ©servÃ©e aux administrateurs
- Lecture accessible Ã  tous les utilisateurs connectÃ©s

### 3. **Calendrier**
- Affichage mensuel des Ã©vÃ©nements
- Navigation entre les mois
- Ajout d'Ã©vÃ©nements (admin uniquement)

### 4. **Demande d'accÃ¨s**
- Formulaire multi-Ã©tapes pour nouveaux utilisateurs
- Workflow de validation par les administrateurs
- Notifications par email (optionnel)

### 5. **Gestion d'incidents**
- **RÃ©servÃ© aux administrateurs uniquement**
- CrÃ©ation et suivi des incidents
- Gestion des prioritÃ©s et statuts
- Historique et notes

### 6. **Documentation**
- Stockage sÃ©curisÃ© des documents sur S3
- CatÃ©gorisation des documents
- Recherche par nom, catÃ©gorie, description
- Upload/tÃ©lÃ©chargement avec URLs prÃ©signÃ©es

## ğŸš€ Installation et DÃ©ploiement

### PrÃ©requis

```bash
# Outils requis
- Node.js 16+ et npm
- Python 3.11+
- AWS CLI configurÃ©
- AWS SAM CLI (pour le dÃ©ploiement serverless)
```

### Ã‰tape 1: Configuration AWS Cognito

```bash
# CrÃ©er le User Pool
aws cognito-idp create-user-pool \
  --pool-name delphinium-users \
  --policies "PasswordPolicy={MinimumLength=8,RequireUppercase=true,RequireLowercase=true,RequireNumbers=true}" \
  --auto-verified-attributes email \
  --username-attributes email

# Noter le UserPoolId retournÃ©

# CrÃ©er le App Client
aws cognito-idp create-user-pool-client \
  --user-pool-id <USER_POOL_ID> \
  --client-name delphinium-web \
  --explicit-auth-flows ALLOW_USER_PASSWORD_AUTH ALLOW_REFRESH_TOKEN_AUTH \
  --generate-secret false

# Noter le ClientId retournÃ©

# CrÃ©er les groupes d'utilisateurs
aws cognito-idp create-group --user-pool-id <USER_POOL_ID> --group-name superadmin
aws cognito-idp create-group --user-pool-id <USER_POOL_ID> --group-name admin
aws cognito-idp create-group --user-pool-id <USER_POOL_ID> --group-name user
aws cognito-idp create-group --user-pool-id <USER_POOL_ID> --group-name service
```

### Ã‰tape 2: DÃ©ploiement du Backend

```bash
cd backend

# Build et dÃ©ploiement avec SAM
sam build
sam deploy --guided \
  --parameter-overrides CognitoUserPoolId=<USER_POOL_ID> CognitoClientId=<CLIENT_ID>

# Noter l'URL de l'API Gateway affichÃ©e dans les outputs
```

### Ã‰tape 3: Configuration du Frontend

```bash
cd frontend

# Installer les dÃ©pendances
npm install --legacy-peer-deps

# Mettre Ã  jour l'URL de l'API dans les composants
# Remplacer 'YOUR_API_GATEWAY_URL' par l'URL obtenue Ã  l'Ã©tape 2 dans:
# - src/components/Login.js
# - src/components/Newsgroup.js
# - src/components/Blog.js
# - src/components/Calendar.js
# - src/components/IncidentManagement.js
# - src/components/Documentation.js
# - src/components/AccessRequest.js

# Lancer le serveur de dÃ©veloppement
npm start

# Build pour production
npm run build
```

### Ã‰tape 4: DÃ©ploiement du Frontend sur S3

```bash
# CrÃ©er un bucket S3
aws s3 mb s3://delphinium-frontend

# Configurer le bucket pour le hosting web
aws s3 website s3://delphinium-frontend --index-document index.html

# Appliquer la policy de bucket public (voir bucket-policy.json)
aws s3api put-bucket-policy --bucket delphinium-frontend --policy file://bucket-policy.json

# DÃ©ployer le build
cd frontend
npm run build
aws s3 sync build/ s3://delphinium-frontend/
```

### Ã‰tape 5: CrÃ©er les premiers utilisateurs

```bash
# CrÃ©er un superadmin
aws cognito-idp admin-create-user \
  --user-pool-id <USER_POOL_ID> \
  --username admin@delphinium.be \
  --user-attributes Name=email,Value=admin@delphinium.be \
  --temporary-password TempPass123!

# Ajouter au groupe superadmin
aws cognito-idp admin-add-user-to-group \
  --user-pool-id <USER_POOL_ID> \
  --username admin@delphinium.be \
  --group-name superadmin
```

## ğŸŒ Langues SupportÃ©es

Le site est entiÃ¨rement traduit en 3 langues :
- ğŸ‡«ğŸ‡· FranÃ§ais (langue par dÃ©faut)
- ğŸ‡³ğŸ‡± NÃ©erlandais
- ğŸ‡¬ğŸ‡§ Anglais

Le changement de langue se fait via le sÃ©lecteur dans la barre de navigation.

## ğŸ“ Structure du Projet

```
website/
â”œâ”€â”€ frontend/                  # Application React
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ components/        # Composants React
â”‚       â”‚   â”œâ”€â”€ Login.js
â”‚       â”‚   â”œâ”€â”€ Newsgroup.js
â”‚       â”‚   â”œâ”€â”€ Blog.js
â”‚       â”‚   â”œâ”€â”€ Calendar.js
â”‚       â”‚   â”œâ”€â”€ IncidentManagement.js
â”‚       â”‚   â”œâ”€â”€ Documentation.js
â”‚       â”‚   â””â”€â”€ AccessRequest.js
â”‚       â”œâ”€â”€ App.js            # Composant principal avec routing
â”‚       â”œâ”€â”€ i18n.js           # Configuration multilingue
â”‚       â””â”€â”€ index.js          # Point d'entrÃ©e
â”‚
â”œâ”€â”€ backend/                   # Backend serverless AWS
â”‚   â”œâ”€â”€ auth/                 # Authentification Cognito
â”‚   â”‚   â”œâ”€â”€ login.py
â”‚   â”‚   â”œâ”€â”€ get_user_info.py
â”‚   â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”‚   â””â”€â”€ COGNITO_CONFIG.md
â”‚   â”œâ”€â”€ newsgroup/            # Forum de discussion
â”‚   â”‚   â”œâ”€â”€ threads.py
â”‚   â”‚   â””â”€â”€ replies.py
â”‚   â”œâ”€â”€ blog/                 # Blog d'actualitÃ©s
â”‚   â”‚   â””â”€â”€ posts.py
â”‚   â”œâ”€â”€ calendar/             # Calendrier des Ã©vÃ©nements
â”‚   â”‚   â””â”€â”€ events.py
â”‚   â”œâ”€â”€ incidents/            # Gestion des incidents
â”‚   â”‚   â””â”€â”€ incidents.py
â”‚   â”œâ”€â”€ docs/                 # Gestion documentaire
â”‚   â”‚   â””â”€â”€ documents.py
â”‚   â”œâ”€â”€ access_request.py     # Demandes d'accÃ¨s
â”‚   â”œâ”€â”€ template.yaml         # Template SAM
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ DEPLOYMENT.md             # Guide de dÃ©ploiement
â””â”€â”€ README.md                 # Ce fichier
```

## ğŸ”’ SÃ©curitÃ©

- **Authentification**: JWT tokens via AWS Cognito
- **Autorisation**: VÃ©rification des rÃ´les cÃ´tÃ© backend (Ã  implÃ©menter complÃ¨tement)
- **CORS**: ConfigurÃ© sur API Gateway
- **HTTPS**: RecommandÃ© via CloudFront + ACM
- **Tokens**: Stockage sÃ©curisÃ© dans localStorage avec expiration

## ğŸ’° Estimation des CoÃ»ts AWS

Pour une copropriÃ©tÃ© de taille moyenne (~50-100 utilisateurs actifs) :

| Service | CoÃ»t estimÃ© |
|---------|-------------|
| AWS Cognito | Gratuit (< 50k MAU) |
| Lambda | ~1-2â‚¬/mois |
| DynamoDB | ~2-5â‚¬/mois |
| S3 | ~1-2â‚¬/mois |
| API Gateway | ~2-3â‚¬/mois |
| **Total** | **~5-15â‚¬/mois** |

## ğŸ› ï¸ DÃ©veloppement

### Lancer le frontend en mode dÃ©veloppement

```bash
cd frontend
npm start
```

Le site sera accessible sur http://localhost:3000

### Tester localement avec SAM

```bash
cd backend
sam build
sam local start-api
```

L'API locale sera accessible sur http://localhost:3000

## ğŸ“ TODO / AmÃ©liorations Futures

- [ ] Ajouter la vÃ©rification JWT complÃ¨te dans toutes les Lambda
- [ ] ImplÃ©menter l'Ã©dition/suppression des posts/threads
- [ ] Ajouter un systÃ¨me de notifications en temps rÃ©el
- [ ] ImplÃ©menter la recherche avancÃ©e
- [ ] Ajouter des graphiques/statistiques (dashboard admin)
- [ ] Mettre en place des tests unitaires et d'intÃ©gration
- [ ] Configurer CI/CD avec GitHub Actions ou AWS CodePipeline
- [ ] Ajouter la gestion des piÃ¨ces jointes dans les threads
- [ ] ImplÃ©menter un systÃ¨me de votes pour les dÃ©cisions

## ğŸ“§ Support

Pour toute question ou problÃ¨me, contactez l'administrateur systÃ¨me de la copropriÃ©tÃ©.

## ğŸ“„ Licence

PropriÃ©tÃ© de la CopropriÃ©tÃ© Delphinium - Usage interne uniquement.

